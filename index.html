<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://theretrosimulatorstimulator.neocities.org/center.css">
<header style="background-color: grey;">
<center>
<marquee direction="right" scrollamount="15" behaviour="slide"><p><a href="https://stats.uptimerobot.com/VWGMlt2GP6" target="_blank">NEW STATUS PAGE!</a> - Website and internal API by G1nX-01 | Icon, Logo and CelLua Monomod by monochromeninja | CelLua Machine by KyYay | Original Cell Machine by Sam Hogan</p></marquee>
<img src="logo.png" height="233px" id="logo"></img>
<p id="splash" style="color: yellow; width: 100%">Loading splash...</p>
<!--<p>The place of the holder</p>-->
</center>
<hr>
<center><a href="https://discord.gg/jC3p7PxxU5"><img src="https://logodownload.org/wp-content/uploads/2017/11/discord-logo-1-1.png" height="100px" title="JOIN OUR DISCORD!"></img></a></center>
</header>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">

    <style>
	#splash {
	position: relative;
	top: -40px;
	left: 180px;
	font-size: 25px;
	}
	
     @font-face {
   font-family: retro;
   src: url(nokiafc22.ttf);
}
@keyframes move-background {
  from {
    background-position: 100% 0; /* starting position */
  }
  to {
    background-position: 0 0; /* ending position */
  }
}
	  html {
        font-family: retro;
		  background: #202020;
		  background-size: 50px 50px;
		  background-image: url("bg.png");
            background-repeat: repeat;
			color: white;
          animation: move-background 60s linear infinite;
		      overflow-x: hidden;
      }
	  a {
	  color: DarkSalmon;
	  }
      .button {
	box-shadow: 0px 10px 14px -7px #276873;
	background:linear-gradient(to bottom, #599bb3 5%, #408c99 100%);
	background-color:#599bb3;
	border-radius:8px;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:20px;
	font-weight:bold;
	padding:13px 32px;
	text-decoration:none;
	text-shadow:0px 1px 0px #3d768a;
}
.button:hover {
	background:linear-gradient(to bottom, #408c99 5%, #599bb3 100%);
	background-color:#408c99;
}
.button:active {
	position:relative;
	top:1px;
}

header {
  padding: 3px;
  background-color: grey;
  color: white;
  up: 100%;
  bottom: 0;

  /* And if you want the div to be full-width: */
  left: 0;
  right: 0;
}

.btn {
  background: #4ad934;
  background-image: -webkit-linear-gradient(top, #4ad934, #3b9949);
  background-image: -moz-linear-gradient(top, #4ad934, #3b9949);
  background-image: -ms-linear-gradient(top, #4ad934, #3b9949);
  background-image: -o-linear-gradient(top, #4ad934, #3b9949);
  background-image: linear-gradient(to bottom, #4ad934, #3b9949);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  color: #ffffff;
  font-size: 23px;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
}

.btn:hover {
  background: #55e63e;
  background-image: -webkit-linear-gradient(top, #55e63e, #4ebd5d);
  background-image: -moz-linear-gradient(top, #55e63e, #4ebd5d);
  background-image: -ms-linear-gradient(top, #55e63e, #4ebd5d);
  background-image: -o-linear-gradient(top, #55e63e, #4ebd5d);
  background-image: linear-gradient(to bottom, #55e63e, #4ebd5d);
  text-decoration: none;
}

.rainbow {
   /* Chrome, Safari, Opera */
  -webkit-animation: rainbow 5s infinite; 
  
  /* Internet Explorer */
  -ms-animation: rainbow 5s infinite;
  
  /* Standar Syntax */
  animation: rainbow 5s infinite; 
}

/* Chrome, Safari, Opera */
@-webkit-keyframes rainbow{
  0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

/* Internet Explorer */
@-ms-keyframes rainbow{
   0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

/* Standar Syntax */
@keyframes rainbow{
    0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

.blink {
                animation: blinker 1.5s linear infinite;
            }
            @keyframes blinker {
                50% {
                    opacity: 0;
                }
            }
   .glitch {
        color: #fff;
        text-shadow: -1px 0 #00ff00, 0 1px #00ff00, 1px 0 #00ff00, 0 -1px #00ff00;
        animation: glitch 1s infinite;
      }
      
      @keyframes glitch {
        0% {
          text-shadow: -1px 0 #ff0000, 0 1px #ff0000, 1px 0 #ff0000, 0 -1px #ff0000;
        }
        25% {
          text-shadow: -1px 0 #00ff00, 0 1px #00ff00, 1px 0 #00ff00, 0 -1px #00ff00;
        }
        50% {
          text-shadow: -1px 0 #0000ff, 0 1px #0000ff, 1px 0 #0000ff, 0 -1px #0000ff;
        }
        75% {
          text-shadow: -1px 0 #ffff00, 0 1px #ffff00, 1px 0 #ffff00, 0 -1px #ffff00;
        }
        100% {
          text-shadow: -1px 0 #ff00ff, 0 1px #ff00ff, 1px 0 #ff00ff, 0 -1px #ff00ff;
        }
      }
	  .blurry {

     /* Any browser which supports CSS3 */
    filter: blur(3px);

    /* Firefox version 34 and earlier */
    filter: url("blur.svg#gaussian_blur");

    /* Webkit in Chrome 52, Safari 9, Opera 39, and earlier */
    -webkit-filter: blur(3px);
}
    </style>
	
	<script src="https://cdn.jsdelivr.net/gh/nodeca/pako@master/dist/pako.js"></script>
	
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

    <script src="https://chancejs.com/chance.min.js"></script>
	
	
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <title>MLB - Monomod Level Browser</title>
  </head>
  <body>
      <center><h1>Monomod Level Browser - Post a level</h1></center>
    <center>Bored? Go see <a href="all" target="_blank">other people's levels</a>!</center>
    <br>
    <center>
      <div style="width: 200px">
        <details>
      <summary style="cursor: pointer;">Click the arrow to post your own level!</summary>
          <br>
      <form action="javascript:void(0)" onsubmit="init()">
          <label for="title">The title of your new masterpiece:</label><br>
          <input type="text" id="title" required maxlength="20"><br><br>
          <label for="code">Insert a playable Monomod code below:</label><br>
          <!--<small id="characterindicator">0</small>-->
          <center>
            <textarea name="Text1" id="code" cols="40" rows="5" maxlength="1000" required style="height: 143px; width: 186px;"></textarea>
          </center>
      <br><br>
            <input type="checkbox" id="isvanilla"> <small>Vanilla level (without any monomod features on it)</small>
			<br><br>
			<input type="checkbox" id="nocountry"> <small>Make country anonymous (your country's flag will not be displayed)</small>
           <br><br>
          <input type="checkbox" id="rules" required> <small>By checking this, you agree to the <a href="rules" target="_blank">rules</a>.</small>
            <br><br>
          <center><input type="submit" value="Submit" id="submit" class="btn" style="cursor: pointer;"></center>
       </form>
</center> 
    </div>
    </details>
  <script>
  function randomtext(length) {
    let result = '';
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    const charactersLength = characters.length;
    let counter = 0;
    while (counter < length) {
      result += characters.charAt(Math.floor(Math.random() * charactersLength));
      counter += 1;
    }
    return result;
}
 const splashes = [
  "buckle up!", 
  "set them up, and knock them down.",
  "original!",
  "something out of a movie!",
  "be careful with the<br>fabric of reality, garfield",
  "today's video is sponsored<br>by raid shadow legends!",
  "placeholder!",
  "I llee kemgfimh!",
  "this specific splash will never show up! funny!", // hey, stop the spying! you won't find much here anyway.
  "love4d when",
  "pain!",
  "javascript is frustrating",
  "apparently,<br>line breaks work here",
  "no way? NO WAY!",
  "works in my computer!",
  'now includes <div class="rainbow">colors!</div>',
  '<div class="blink" style="color: red;">Wake up.</div>',
  'Awesome! Awesome! Awesome!',
  '<div class="glitch"><marquee direction="right" scrollamount="25" behaviour="slide">BEST WEBSITE OF 20' + chance.natural({min: 10, max: 17}) + '!! XDDD!!!!!</marquee></div>',
  "extraordinary!",
  "no problem!",
  "jsdhkfddsfsdjkfh<br>dkhsljajkhsdahjksad<br>djhldhsjkhdjskakhdsja<br>dsjkhsdhajksdhajksahkjdghj<br>ksdajhjhsdagjdsagjdsaghjdsa<br>dshiklshdahdsajksdhakshdaj<br>dshkjdsahgksdgahkgdsahjgsdhajggshda!",
  "<i>!</i>",
  "...what.",
  "sina sitelen ala e ni kepeken toki ante!",
  "Osu!",
  "recommended by 99,9% of scientists!",
  "go grab a coffee, i'll be waiting here",
  "there is absolutely NO WAY",
  "funny css!",
  "im sorry",
  "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa!",
  "you're valid!",
  "*your",
  "*youre",
  "*you're",
  "small grammar mistake :enemy_trell:",
  ":enemy_trell:",
  "THOMAS, THE THERMONUCLEAR BOMB",
  '<div style="color: red;">Your Mother.</div>',
  "nice opinion, one small issue.<br>i've planted a landmine at an undisclosed<br>location inside your house. every step<br>you take is a... <i>risky</i> move.",
  "just the two of us!",
  "in this classroom in the sky...<br>crimes of passion are just fine",
  "when enacted on AI.",
  "quite a drastic pick-up line!",
  "leaving characters to DIE",
  "just to guarantee you're mine!",
  "ea sports",
  "Otro chiste y te meto en cargador<br>en el ano aber si te<br>vuelves eléctrico",
  "E.",
  "this is a certified hjgghjhgj moment!",
  "hjgghjhgj!",
  "i dont have many more ideas<br>for splash texts at this point",
  /*
  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⣤⣤⣤⣴⣤⣤⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣀⣴⣾⠿⠛⠋⠉⠁⠀⠀⠀⠈⠙⠻⢷⣦⡀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣤⣾⡿⠋⠁⠀⣠⣶⣿⡿⢿⣷⣦⡀⠀⠀⠀⠙⠿⣦⣀⠀⠀⠀⠀
⠀⠀⢀⣴⣿⡿⠋⠀⠀⢀⣼⣿⣿⣿⣶⣿⣾⣽⣿⡆⠀⠀⠀⠀⢻⣿⣷⣶⣄⠀
⠀⣴⣿⣿⠋⠀⠀⠀⠀⠸⣿⣿⣿⣿⣯⣿⣿⣿⣿⣿⠀⠀⠀⠐⡄⡌⢻⣿⣿⡷
⢸⣿⣿⠃⢂⡋⠄⠀⠀⠀⢿⣿⣿⣿⣿⣿⣯⣿⣿⠏⠀⠀⠀⠀⢦⣷⣿⠿⠛⠁
⠀⠙⠿⢾⣤⡈⠙⠂⢤⢀⠀⠙⠿⢿⣿⣿⡿⠟⠁⠀⣀⣀⣤⣶⠟⠋⠁⠀⠀⠀
⠀⠀⠀⠀⠈⠙⠿⣾⣠⣆⣅⣀⣠⣄⣤⣴⣶⣾⣽⢿⠿⠟⠋⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀  ⠉⠙⠛⠛⠙⠋⠉⠉⠀⠀⠀⠀⠀

    You won't find anything here.⠀⠀⠀
       -G1nX
  */
  "It's our little secret.<br>YmDaUIfzXn0vLJocLKUrBATjhZ91Ol4xSz==" + '<br><audio controls><source src="thisisweird.ogg" type="audio/ogg">Your browser does not support the audio element.</audio>',
  "made by yours truly!"
 ]
 splashes.push("the chance of you getting<br>this specific splash is 1/" + splashes.length + "!");
 console.log(splashes)
 
 //splashes[Math.floor((Math.random()*splashes.length))]
 function randomSplash() {
 console.log(splashes.length-1)
 var o = chance.natural({min: 0, max: splashes.length - 1, exclude: [8]})
 //var o = splashes.length - 2
 console.log(o)
 var i = splashes[o]
 if (o == 18) {
 var root = document.getElementsByTagName( 'html' )[0]; // '0' to assign the first (and only `HTML` tag)

root.setAttribute( 'class', 'blurry' );
 }
 if (i == "this specific splash will never show up! funny!") {
 console.log("hmm") 
 i = splashes[3]
 }
 return i
 }
 window.onload = function() {
  document.getElementById("splash").innerHTML = randomSplash() 
    // (A) TEST FETCH HEADER REQUEST TO GOOGLE ADSENSE
  let test = new Request(
    "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",
    // "https://static.ads-twitter.com/uwt.js",
    { method: "HEAD", mode: "no-cors" }
  );
 
  // (B) FIRE THE REQEST
  fetch(test)
  .then(res => console.log("the ads are among us (pun intended)"))
  .catch(err => {
  Swal.fire(
  'Hey, just a warning',
  "You seem to have adblocker on. This means country selection will always be set as anonymous until you turn it off.",
  'warning'
)
  });
 }
const uiscale = 1;
let time = 0;
let stime = 0;
//document.getElementById("splash").style.top = "-70"
setInterval(function() {
    time += 0.01 * 1.5; // thanks ninja!
	stime += 0.01 * .45; 
	var height = $(window).height();
    var width = $(window).width();
    let scale = (Math.sin(time * .777) / 5 + 1.5) * uiscale;
    let x = width / 2 + uiscale * 150;
    let y = height / 2 - 50;
    let rotation = Math.sin(time * .666) / 15 - 0.2;
	let tx = width / 2;
    let ty = height / 2 - 100 * uiscale;
	let tscale = uiscale;
    let trotation = Math.sin(stime) / 20;
	document.getElementById("splash").style.transform = 'rotate(' + rotation + 'rad)';
	document.getElementById("logo").style.transform = 'rotate(' + trotation + 'rad)';
}, 1);
	function isValidZlib(b64) {
    let strData = atob(b64);
    let charData = strData.split("").map(x => x.charCodeAt(0));
    let binData = new Uint8Array(charData);
    try {
        let data = pako.inflate(binData);
        return true;
    } catch {
        return false;
    }
}

const BASE84 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!$%&+-.=?^{}/#_*':,@~|";

function isValidB84(b84) {
    return [...b84].every(x => BASE84.includes(x));
}

function isValidK3(code) {
  let parts = code.split(";");
  return code.startsWith("K3") && ";:".includes(code[2]) && parts.length >= 5 &&
      isValidB84(parts[1]) && isValidB84(parts[2]) && isValidB84(parts[3]) &&
      parts[3].length === 1 && isValidZlib(parts[4]);
}
	
	function init() {
	console.log(isValidK3(document.getElementById("code").value))
	
	  if (isValidK3(document.getElementById("code").value) == false) {
	  Toastify({

text: "That code is invalid. Remember: Only K3 codes are supported for now!",

duration: 4000

}).showToast();
	return
	  } else {
	  dsagydgshaadshj()
	  }
	}
	
	function dsagydgshaadshj() {
	
	$.ajax({
  url: "https://b3vk4s-3000.csb.app/doesthatevenexist/" + encodeURIComponent(document.getElementById("title").value),
  method: "GET",
  success: function(response) {
    console.log(response);
	if (response.result == false) {
	ajaskhddhjska()
	return
	} else {
	Toastify({

text: "Sorry, but that already exists...",

duration: 3000

}).showToast();
	return
	}
  },
  error: function(xhr, status, error) {
    console.log("Error: " + error);
  }
});
	
	}
	function submit(c) {
		$.ajax({
  type: "POST",
  url: "https://b3vk4s-3000.csb.app/newcodething",
  data: JSON.stringify({title: encodeURIComponent(document.getElementById("title").value), code: document.getElementById("code").value, isvanilla: validateVanilla(document.getElementById("isvanilla").checked), country: c}),
  contentType: "application/json",
  success: function(data) {
    Toastify({
destination: "/monomod-browser/all",
  
  newWindow: true,
  
text: 'Your level "' + document.getElementById("title").value + '" was submitted successfully! Click this popup to see it in the list!',

duration: 3000

}).showToast();
	}
	
})

}	
	
	function validateVanilla(str) {
       if (str) { return "on" } else { return "off" }
	}
	
	function ajaskhddhjska() {
	if (document.getElementById("nocountry").checked) {
	submit("nope")
	} else {
		 fetch('https://ipapi.co/json')
    .then(response => response.json())
    .then(data => {
	var c = data.country_code
	submit(c)
	//console.log(JSON.stringify({title: encodeURIComponent(document.getElementById("title").value), code: document.getElementById("code").value, isvanilla: validateVanilla(document.getElementById("isvanilla").checked), country: c}))
});
	}
}

  </script>
  </body>
</html>